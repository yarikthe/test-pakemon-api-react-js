"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("goober"),r=require("react"),t=(e=r)&&"object"==typeof e&&"default"in e?e.default:e;function a(e,n){var r=e.length,t=n.length,a=[];if(!r||!t)return 0;if(r<t){var o=[n,e];e=o[0],n=o[1]}if(-1!==e.indexOf(n))return t+1/r;for(var l=0;l<=r;++l)a[l]=[0];for(var i=0;i<=t;++i)a[0][i]=0;for(var c=1;c<=r;++c)for(var s=1;s<=t;++s)a[c][s]=e[c-1]===n[s-1]?1+a[c-1][s-1]:Math.max(a[c][s-1],a[c-1][s]);return a[r][t]}function o(e,n){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!n)return e;var r=n;return Object.keys(r).reduce((function(e,n){var t=new RegExp(n,"g");return e.replace(t,r[n])}),e)}var l={selectSomeItems:"Select...",allItemsAreSelected:"All items are selected.",selectAll:"Select All",search:"Search",clearSearch:"Clear Search",clearSelected:"Clear Selected"};function i(e,n){return(null==n?void 0:n[e])||l[e]}var c,s=function(){return t.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray"},t.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},u=n.css({"& input,& span":{verticalAlign:"middle",margin:0},span:{display:"inline-block",paddingLeft:"5px"},"&.disabled":{opacity:.5}}),d=function(e){var n=e.option,r=e.disabled;return t.createElement("div",{className:u+" item-renderer "+(r&&"disabled")},t.createElement("input",{type:"checkbox",onChange:e.onClick,checked:e.checked,tabIndex:-1,disabled:r}),t.createElement("span",null,n.label))},f=n.css({boxSizing:"border-box",cursor:"pointer",display:"block",padding:"var(--rmsc-p)",outline:0,"&:hover,&:focus":{background:"var(--rmsc-hover)"},"&.selected":{background:"var(--rmsc-selected)"}}),p=function(e){var n=e.itemRenderer,a=void 0===n?d:n,o=e.option,l=e.checked,i=e.focused,c=e.tabIndex,s=e.disabled,u=e.onSelectionChanged,p=e.onClick,m=r.useRef();r.useEffect((function(){h()}),[i]);var v=function(){u(!l)},h=function(){i&&!s&&m&&m.current.focus()};return t.createElement("label",{className:f+" select-item "+(l&&"selected"),role:"option","aria-selected":l,tabIndex:c,ref:m,onKeyDown:function(e){switch(e.which){case 13:case 32:v();break;default:return}e.preventDefault()}},t.createElement(a,{option:o,checked:l,onClick:function(e){v(),p(e)},disabled:s}))},m=n.css({margin:0,paddingLeft:0,li:{listStyle:"none",margin:0}}),v=function(e){var n=e.value,r=e.onChange,a=e.disabled,o=e.ItemRenderer,l=e.focusIndex,i=e.onClick;return t.createElement("ul",{className:m},e.options.map((function(e,c){var s=c+2;return t.createElement("li",{key:e.hasOwnProperty("key")?e.key:c},t.createElement(p,{focused:l===s,tabIndex:s,option:e,onSelectionChanged:function(t){return o=e,void(a||r(t?[].concat(n,[o]):n.filter((function(e){return e.value!==o.value}))));var o},checked:!!n.find((function(n){return n.value===e.value})),onClick:function(e){return i(e,s)},itemRenderer:o,disabled:e.disabled||a}))})))};!function(e){e[e.SEARCH=-1]="SEARCH",e[e.NONE=1]="NONE"}(c||(c={}));var h=n.css({width:"100%",position:"relative",borderBottom:"1px solid var(--rmsc-border)",input:{height:"var(--rmsc-h)",padding:"0 var(--rmsc-p)",width:"100%",outline:0,border:0}}),b=n.css({cursor:"pointer",position:"absolute",top:0,right:0,bottom:0,background:"none",border:0,padding:"0 calc(var(--rmsc-p)/2)","[hidden]":{display:"none"}}),g=function(e){var n,l,u,d=e.onChange,f=e.options,m=e.value,g=e.filterOptions,x=e.selectAllLabel,S=e.ItemRenderer,y=e.disabled,E=e.disableSearch,k=e.focusSearchOnOpen,w=e.hasSelectAll,C=e.overrideStrings,I=e.ClearIcon,O=e.debounceDuration,R=r.useState(""),N=R[0],A=R[1],D=r.useState(""),M=D[0],H=D[1],L=r.useState(k&&!E?c.SEARCH:c.NONE),T=L[0],P=L[1],B=r.useCallback((n=function(e){return H(e)},l=O,function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];clearTimeout(u),u=setTimeout((function(){n.apply(null,r)}),l)}),[]),j={label:x||i("selectAll",C),value:""},K=function(e){return P(e)},z=function(){return g?g(f,M):function(e,n,r){if(!n)return e;var t=o(n,void 0);return e.filter((function(e){return null!=e.label&&null!=e.value})).map((function(e){return{option:e,score:a(o(e.label,void 0),t)}})).filter((function(e){return e.score>=t.length-2})).sort((function(e,n){return n.score-e.score})).map((function(e){return e.option}))}(f,M)},F=function(e){var n=T+e;n=Math.max(1,n),n=Math.min(n,f.length+1),P(n)},W=r.useMemo((function(){var e=z().filter((function(e){return!e.disabled}));return[e.every((function(e){return-1!==m.findIndex((function(n){return n.value===e.value}))})),0!==e.length]}),[N,m]),_=W[0],q=W[1];return t.createElement("div",{className:"select-panel",role:"listbox",onKeyDown:function(e){switch(e.which){case 38:if(e.altKey)return;F(-1);break;case 40:if(e.altKey)return;F(1);break;default:return}e.stopPropagation(),e.preventDefault()}},!E&&t.createElement("div",{className:h},t.createElement("input",{autoFocus:k,placeholder:i("search",C),type:"text","aria-describedby":i("search",C),onKeyDown:function(e){return e.stopPropagation()},onChange:function(e){B(e.target.value),A(e.target.value),P(c.SEARCH)},onFocus:function(){P(c.SEARCH)},value:N}),t.createElement("button",{type:"button",className:b+" search-clear-button",hidden:!N,onClick:function(){H(""),A("")},"aria-label":i("clearSearch",C)},I||t.createElement(s,null))),w&&q&&t.createElement(p,{focused:1===T,tabIndex:1,checked:_,option:j,onSelectionChanged:function(e){var n=function(e){var n=z().filter((function(e){return!e.disabled})).map((function(e){return e.value}));if(e){var r=m.map((function(e){return e.value})),t=[].concat(r,n);return f.filter((function(e){return t.includes(e.value)}))}return m.filter((function(e){return!n.includes(e.value)}))}(e);d(n)},onClick:function(){return K(0)},itemRenderer:S,disabled:y}),t.createElement(v,Object.assign({},e,{options:z(),focusIndex:T,onClick:function(e,n){return K(n)},ItemRenderer:S,disabled:y})))};function x(e){return t.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},t.createElement("path",{d:e.expanded?"M18 15 12 9 6 15":"M6 9L12 15 18 9"}))}var S=n.css({animation:"rotate 2s linear infinite","& .path":{stroke:"var(--rmsc-border)",strokeWidth:"4px",strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite"},"@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1,150",strokeDashoffset:0},"50%":{strokeDasharray:"90,150",strokeDashoffset:"-35"},"100%":{strokeDasharray:"90,150",strokeDashoffset:"-124"}}});function y(e){var n=e.size,r=void 0===n?24:n;return t.createElement("span",{style:{width:r,marginRight:"0.2rem"}},t.createElement("svg",{width:r,height:r,className:S,viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},t.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})))}var E=n.css({position:"absolute",zIndex:1,top:"100%",width:"100%",paddingTop:"8px",".panel-content":{maxHeight:"300px",overflowY:"auto",borderRadius:"var(--rmsc-radius)",background:"var(--rmsc-bg)",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 11px rgba(0, 0, 0, 0.1)"}}),k=n.css({position:"relative",outline:0,backgroundColor:"var(--rmsc-bg)",border:"1px solid var(--rmsc-border)",borderRadius:"var(--rmsc-radius)","&:focus-within":{boxShadow:"var(--rmsc-main) 0 0 0 1px",borderColor:"var(--rmsc-main)"}}),w=n.css({position:"relative",padding:"0 var(--rmsc-p)",display:"flex",alignItems:"center",width:"100%",height:"var(--rmsc-h)",cursor:"default",outline:0,".dropdown-heading-value":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}}),C=n.css({cursor:"pointer",background:"none",border:0,padding:0,display:"flex"}),I=function(e){var n=e.children,a=e.contentComponent,o=e.contentProps,l=e.isLoading,c=e.disabled,u=e.shouldToggleOnHover,d=e.labelledBy,f=e.onMenuToggle,p=e.ArrowRenderer,m=e.ClearSelectedIcon,v=e.defaultIsOpen,h=e.isOpen,b=r.useState(!0),g=b[0],S=b[1],I=r.useState(v),O=I[0],R=I[1],N=r.useState(!1),A=N[0],D=N[1],M=p||x,H=r.useRef();r.useEffect((function(){f&&f(O)}),[O]),r.useEffect((function(){void 0===v&&"boolean"==typeof h&&(S(!1),R(h))}),[h]);var L=function(e){g&&u&&R(e)};return t.createElement("div",{tabIndex:0,className:k+" dropdown-container","aria-labelledby":d,"aria-expanded":O,"aria-readonly":!0,"aria-disabled":c,ref:H,onKeyDown:function(e){var n;if(g)switch(e.which){case 27:case 38:R(!1),null==H||null==(n=H.current)||n.focus();break;case 32:case 13:case 40:R(!0);break;default:return}e.preventDefault()},onFocus:function(){return!A&&D(!0)},onBlur:function(e){!e.currentTarget.contains(e.relatedTarget)&&g&&(D(!1),R(!1))},onMouseEnter:function(){return L(!0)},onMouseLeave:function(){return L(!1)}},t.createElement("div",{className:w+" dropdown-heading",onClick:function(){g&&R(!l&&!c&&!O)}},t.createElement("div",{className:"dropdown-heading-value"},n),l&&t.createElement(y,null),o.value.length>0&&t.createElement("button",{type:"button",className:C+" clear-selected-button",onClick:function(e){e.stopPropagation(),o.onChange([]),g&&R(!1)},"aria-label":i("clearSelected",o.overrideStrings)},m||t.createElement(s,null)),t.createElement(M,{expanded:O})),O&&t.createElement("div",{className:E+" dropdown-content"},t.createElement("div",{className:"panel-content"},t.createElement(a,Object.assign({},o)))))},O=function(e){var n=e.value,r=e.options,a=e.valueRenderer,o=e.overrideStrings,l=0===n.length,c=n.length===r.length,s=a&&a(n,r);return l?t.createElement("span",{className:"gray"},s||i("selectSomeItems",o)):t.createElement("span",null,s||(c?i("allItemsAreSelected",o):n.map((function(e){return e.label})).join(", ")))},R=n.css({"--rmscMain":"#4285f4","--rmscHover":"#f1f3f5","--rmscSelected":"#e2e6ea","--rmscBorder":"#ccc","--rmscGray":"#aaa","--rmscBg":"#fff","--rmscP":"10px","--rmscRadius":"4px","--rmscH":"38px","*":{boxSizing:"border-box",transition:"all 0.2s ease"},".gray":{color:"var(--rmsc-gray)"}});exports.Dropdown=I,exports.SelectItem=p,exports.SelectPanel=g,exports.default=function(e){var n=e.focusSearchOnOpen,r=e.hasSelectAll,a=e.className,o=e.options,l=e.overrideStrings,i=e.disabled,c=e.debounceDuration,s=e.value||[];return t.createElement("div",{className:R+" "+(void 0===a?"multi-select":a)},t.createElement(I,{isLoading:e.isLoading,contentComponent:g,shouldToggleOnHover:e.shouldToggleOnHover,contentProps:{ItemRenderer:e.ItemRenderer,options:o,value:s,hasSelectAll:void 0===r||r,selectAllLabel:e.selectAllLabel,onChange:e.onChange,disabled:i,disableSearch:e.disableSearch,focusSearchOnOpen:void 0===n||n,filterOptions:e.filterOptions,overrideStrings:l,ClearIcon:e.ClearIcon,debounceDuration:void 0===c?300:c},disabled:i,labelledBy:e.labelledBy,onMenuToggle:e.onMenuToggle,ArrowRenderer:e.ArrowRenderer,ClearSelectedIcon:e.ClearSelectedIcon,defaultIsOpen:e.defaultIsOpen,isOpen:e.isOpen},t.createElement(O,{value:s,options:o,valueRenderer:e.valueRenderer,overrideStrings:l})))};
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
